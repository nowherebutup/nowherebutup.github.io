webpackJsonp([21],{g6y7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=s("bOdI"),r=s.n(i),n=(s("fivE"),s("pD4b")),c=(s("Asns"),s("RQxp")),o=(s("OWWB"),s("1fWZ")),h=(s("eqfM"),s("/QYm")),d=(s("k3b4"),s("+2ln")),u=(s("4yKu"),s("wolx")),l=(s("nOaS"),s("pIDD")),p=(s("FO5P"),s("woHG")),f=s("/8ty"),g=s("AArU"),b=s("DEHg"),y=s("SIH0"),D=s.n(y),m=s("GKmE"),v={computed:{showBack:function(){return this.lastParentDep.id||2===this.tabType||this.lastParentDep.isUser}},components:(a={AddressList:f.a,BusinessCard:g.a},r()(a,p.a.name,p.a),r()(a,l.a.name,l.a),r()(a,u.a.name,u.a),r()(a,d.a.name,d.a),r()(a,h.a.name,h.a),r()(a,o.a.name,o.a),r()(a,c.a.name,c.a),r()(a,n.a.name,n.a),a),watch:{keyWord:function(){this.fuzzySearch()}},data:function(){return{tabType:1,oldType:1,isLoading:!1,isSearch:!1,keyWord:"",orgId:JSON.parse(Object(m.d)("userInfo")).orgId,searchUserList:[],searchDeptList:[],treeList:[],list:[],ulist:[],curDeptName:"中通服咨询设计研究院",curDeptObj:{},curUser:{},hasBtm:!1,lastParentDep:{id:"",isUser:!1},defaultAvatar:D.a}},created:function(){var t=this.$route.query.depId;t&&this.getDeptsUsers(t)},methods:{isValidImg:function(t){return Object(m.f)(t)},fuzzySearch:function(){var t=this;3!==this.tabType&&(this.oldType=this.tabType),this.keyWord?(this.tabType=3,this.isSearch=!0,Object(b.a)({orgId:this.orgId,keyWord:this.keyWord}).then(function(e){(t.isSearch=!1,t.clearList(),e&&e.success)?((e.data.user||[]).forEach(function(e){t.searchUserList.push(e)}),(e.data.dep||[]).forEach(function(e){t.searchDeptList.push(e)})):Object(h.a)("获取数据失败！")})):this.tabType=this.oldType},clearList:function(){var t=this.searchUserList;t.splice(0,t.length);var e=this.searchDeptList;e.splice(0,e.length)},getDeptsArr:function(t){var e=this;Object(b.b)({orgId:this.orgId,parentDepId:t}).then(function(t){if(t&&t.success){var s=e.list;s.splice(0,s.length),t.data.forEach(function(t){e.lastParentDep.id=t.parentId,e.lastParentDep.isUser=!1,t.text=t.depName,s.push(t)})}else h.a.fail("获取数据失败！")})},getDeptsUsers:function(t){var e=this;this.isLoading=!0,Object(b.d)({orgId:this.orgId,depId:t}).then(function(t){if(e.isLoading=!1,t&&t.success){var s=e.ulist;s.splice(0,s.length),console.log(t.data),t.data.forEach(function(t){console.log(111),s.push(t)})}else h.a.fail("获取该部门下的人员失败！")})},openNext:function(t){this.lastParentDep.id=t.parentId,this.lastParentDep.isUser=!1,this.curDeptName=t.text,this.curDeptObj=t,t.leaf?(this.tabType=2,this.getDeptsUsers(t.id)):(this.tabType=1,this.getDeptsArr(t.id))},toClickUserPage:function(t){this.$router.push({path:"/contact/detail",query:{phone:t.phone}})},onClickLeft:function(){this.$router.isBack=!0,this.$router.go(-1)},backIndex:function(){this.$router.isBack=!0,this.$router.go(-1)},getSearchUser:function(t){this.tabType=5,this.curUser=t},getSearchDept:function(t){t.leaf=!0,this.openNext(t)}}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"address"},[e("van-nav-bar",{attrs:{fixed:"","left-text":"返回","left-arrow":""},on:{"click-left":this.onClickLeft}}),this._v(" "),e("div",{staticClass:"address-main",class:{"has-index-btm":this.hasBtm}},[this.isLoading?e("div",{staticClass:"org-loading"},[e("van-loading",{attrs:{vertical:""}},[this._v("加载中...")])],1):e("AddressList",{attrs:{id:"userlist",list:this.ulist},on:{toClickUser:this.toClickUserPage}})],1)],1)},staticRenderFns:[]};var L=s("VU/8")(v,I,!1,function(t){s("mLOu")},"data-v-4f67e6c2",null);e.default=L.exports},mLOu:function(t,e){}});