webpackJsonp([25],{LUCg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=s("mvHQ"),i=s.n(r),c=s("bOdI"),n=s.n(c),h=(s("fivE"),s("pD4b")),l=(s("Asns"),s("RQxp")),d=(s("OWWB"),s("1fWZ")),o=(s("eqfM"),s("/QYm")),p=(s("k3b4"),s("+2ln")),u=(s("4yKu"),s("wolx")),f=(s("nOaS"),s("pIDD")),v=(s("FO5P"),s("woHG")),m=s("/8ty"),g=s("AArU"),D=s("DEHg"),b=s("SIH0"),y=s.n(b),L=s("GKmE"),I={components:(a={AddressList:m.a,BusinessCard:g.a},n()(a,v.a.name,v.a),n()(a,f.a.name,f.a),n()(a,u.a.name,u.a),n()(a,p.a.name,p.a),n()(a,o.a.name,o.a),n()(a,d.a.name,d.a),n()(a,l.a.name,l.a),n()(a,h.a.name,h.a),a),watch:{keyWord:function(){this.fuzzySearch()}},data:function(){return{tabType:1,oldType:1,loading:!1,isSearch:!1,keyWord:"",orgId:JSON.parse(Object(L.d)("userInfo")).orgId,searchUserList:[],searchDeptList:[],treeList:[],list:[],ulist:[],curDeptName:"中通服咨询设计研究院",curDeptObj:{},curUser:{},hasBtm:!1,lastParentDep:{id:"",isDept:!0},defaultAvatar:y.a}},mounted:function(){var e=this;Object(L.e)("searchUsers")&&JSON.parse(Object(L.d)("searchUsers")).forEach(function(t){e.searchUserList.push(t)});Object(L.e)("searchDeps")&&JSON.parse(Object(L.d)("searchDeps")).forEach(function(t){e.searchDeptList.push(t)})},methods:{isValidImg:function(e){return Object(L.f)(e)},fuzzySearch:function(){var e=this;3!==this.tabType&&(this.oldType=this.tabType),this.keyWord?(this.tabType=3,this.isSearch=!0,Object(D.a)({orgId:this.orgId,keyWord:this.keyWord}).then(function(t){if(e.isSearch=!1,e.clearList(),t&&t.success){var s=t.data.user||[];Object(L.h)("searchUsers",i()(s)),s.forEach(function(t){e.searchUserList.push(t)});var a=t.data.dep||[];Object(L.h)("searchDeps",i()(a)),a.forEach(function(t){e.searchDeptList.push(t)})}else Object(o.a)("获取数据失败！")})):this.tabType=this.oldType},clearList:function(){var e=this.searchUserList;e.splice(0,e.length);var t=this.searchDeptList;t.splice(0,t.length)},getDeptsArr:function(e){var t=this;Object(D.b)({orgId:this.orgId,parentDepId:e}).then(function(e){if(e&&e.success){var s=t.list;s.splice(0,s.length),e.data.forEach(function(e){t.lastParentDep.id=e.parentId,e.text=e.depName,s.push(e)})}else o.a.fail("获取数据失败！")})},getDeptsUsers:function(e){var t=this;this.loading=!0,Object(D.d)({orgId:this.orgId,depId:e}).then(function(e){if(t.loading=!1,e&&e.success){var s=t.ulist;s.splice(0,s.length),e.data.forEach(function(e){s.push(e)})}else o.a.fail("获取该部门下的人员失败！")})},openNext:function(e){this.lastParentDep.id=e.parentId,this.lastParentDep.isDept=!0,this.curDeptName=e.text,this.curDeptObj=e,e.leaf?(this.tabType=2,this.getDeptsUsers(e.id)):(this.tabType=1,this.getDeptsArr(e.id))},toClickUserPage:function(e){this.curUser=e,this.lastParentDep.isDept=!1,this.lastParentDep.id=e.depId,this.tabType=4},onClickLeft:function(){this.$router.isBack=!0,this.$router.go(-1)},backIndex:function(){this.$router.isBack=!0,this.$router.go(-1)},getSearchUser:function(e){this.$router.push({path:"/contact/detail",query:{phone:e.phone}})},getSearchDept:function(e){this.$router.push({path:"/contact/users",query:{depId:e.id}})},selectIndexBtmFun:function(e){this.hasBtm=e},removeIndexBtmFun:function(e){this.hasBtm=e}}},U={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"address"},[s("van-nav-bar",{attrs:{fixed:"",title:e.curDeptName,"left-text":"返回","left-arrow":""},on:{"click-left":e.onClickLeft}}),e._v(" "),s("van-cell",[s("van-search",{staticClass:"address-search border",attrs:{placeholder:"请输入关键字搜索",shape:"round",autofocus:"",clearable:""},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),e._v(" "),s("div",{staticClass:"address-main"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.searchUserList.length&&0===e.searchDeptList.length,expression:"searchUserList.length === 0 && searchDeptList.length === 0"}],staticClass:"card-empty"},[s("div",{staticClass:"card-empty-img"}),e._v(" "),e.isSearch?s("div",{staticClass:"card-empty-tip1"},[e._v("正在搜索中...")]):s("div",{staticClass:"card-empty-tip1"},[e._v("搜索无结果")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:(e.searchUserList||e.searchDeptList)&&(e.searchUserList.length>0||e.searchDeptList.length>0),expression:"\n        (searchUserList || searchDeptList) &&\n          (searchUserList.length > 0 || searchDeptList.length > 0)\n      "}]},[e._l(e.searchDeptList,function(t){return s("van-cell",{key:t.deptId,on:{click:function(s){return e.getSearchDept(t)}}},[s("van-icon",{staticClass:"address-has-cell-img iconfont",attrs:{color:"#3badfe",size:"1.2rem","class-prefix":"icon",name:"wenjianjia"}}),e._v(" "),s("div",{staticClass:"address-has-cell-span"},[s("div",{staticClass:"cell-span-name"},[e._v(e._s(t.depName))])])],1)}),e._v(" "),e._l(e.searchUserList,function(t){return s("van-cell",{key:t.userId,on:{click:function(s){return e.getSearchUser(t)}}},[s("img",{staticClass:"address-has-cell-img address-has-cell-cri",attrs:{src:e.isValidImg(t.avatar)||e.defaultAvatar,alt:""}}),e._v(" "),s("div",{staticClass:"address-has-cell-span"},[s("div",{staticClass:"cell-span-name"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"cell-span-dept"},[e._v(e._s(t.deptName))])])])})],2)])],1)},staticRenderFns:[]};var k=s("VU/8")(I,U,!1,function(e){s("neHI")},"data-v-017eefe6",null);t.default=k.exports},neHI:function(e,t){}});