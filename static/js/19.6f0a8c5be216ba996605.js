webpackJsonp([19],{"+QaG":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=s("woOf"),r=s.n(i),n=s("bOdI"),c=s.n(n),h=(s("fivE"),s("pD4b")),o=(s("Asns"),s("RQxp")),u=(s("OWWB"),s("1fWZ")),d=(s("eqfM"),s("/QYm")),p=(s("k3b4"),s("+2ln")),f=(s("4yKu"),s("wolx")),l=(s("nOaS"),s("pIDD")),m=(s("FO5P"),s("woHG")),g=s("/8ty"),b=s("AArU"),D=s("DEHg"),y=s("SIH0"),I=s.n(y),v=s("GKmE"),U=s("5V3A"),O={computed:{showBack:function(){return this.lastParentDep.id||2===this.tabType||this.lastParentDep.isUser}},components:(a={AddressList:g.a,BusinessCard:b.a},c()(a,m.a.name,m.a),c()(a,l.a.name,l.a),c()(a,f.a.name,f.a),c()(a,p.a.name,p.a),c()(a,d.a.name,d.a),c()(a,u.a.name,u.a),c()(a,o.a.name,o.a),c()(a,h.a.name,h.a),a),watch:{keyWord:function(){this.fuzzySearch()}},data:function(){return{tabType:1,oldType:1,loading:!1,isSearch:!1,keyWord:"",orgId:JSON.parse(Object(v.d)("userInfo")).orgId,searchUserList:[],searchDeptList:[],treeList:[],list:[],ulist:[],curDeptName:"中通服咨询设计研究院",curDeptObj:{},curUser:{userId:"",name:"",phone:"",email:"",deptName:""},hasBtm:!1,lastParentDep:{id:"",isUser:!1},defaultAvatar:I.a}},created:function(){var t=this.$route.query.phone;t&&this.getUserInfo(t)},methods:{getUserInfo:function(t){var e=this,s={username:t,id:""};Object(U.a)(s).then(function(t){t.success?r()(e.curUser,t.data):Object(d.a)(t.message||"获取个人信息失败")})},isValidImg:function(t){return Object(v.f)(t)},fuzzySearch:function(){var t=this;3!==this.tabType&&(this.oldType=this.tabType),this.keyWord?(this.tabType=3,this.isSearch=!0,Object(D.a)({orgId:this.orgId,keyWord:this.keyWord}).then(function(e){(t.isSearch=!1,t.clearList(),e&&e.success)?((e.data.user||[]).forEach(function(e){t.searchUserList.push(e)}),(e.data.dep||[]).forEach(function(e){t.searchDeptList.push(e)})):Object(d.a)("获取数据失败！")})):this.tabType=this.oldType},clearList:function(){var t=this.searchUserList;t.splice(0,t.length);var e=this.searchDeptList;e.splice(0,e.length)},getDeptsArr:function(t){var e=this;Object(D.b)({orgId:this.orgId,parentDepId:t}).then(function(t){if(t&&t.success){var s=e.list;s.splice(0,s.length),t.data.forEach(function(t){e.lastParentDep.id=t.parentId,e.lastParentDep.isUser=!1,t.text=t.depName,s.push(t)})}else d.a.fail("获取数据失败！")})},getDeptsUsers:function(t){var e=this;this.loading=!0,Object(D.d)({orgId:this.orgId,depId:t}).then(function(t){if(e.loading=!1,t&&t.success){var s=e.ulist;s.splice(0,s.length),t.data.forEach(function(t){s.push(t)})}else d.a.fail("获取该部门下的人员失败！")})},openNext:function(t){this.lastParentDep.id=t.parentId,this.lastParentDep.isUser=!1,this.curDeptName=t.text,this.curDeptObj=t,t.leaf?(this.tabType=2,this.getDeptsUsers(t.id)):(this.tabType=1,this.getDeptsArr(t.id))},toClickUserPage:function(t){this.curUser=t,this.lastParentDep.isUser=!0,this.lastParentDep.id=t.parentId,this.tabType=4},onClickLeft:function(){this.$router.isBack=!0,this.$router.go(-1)},backIndex:function(){this.$router.isBack=!0,this.$router.go(-1)},getSearchUser:function(t){this.tabType=5,this.curUser=t},getSearchDept:function(t){t.leaf=!0,this.openNext(t)},selectIndexBtmFun:function(t){this.hasBtm=t},removeIndexBtmFun:function(t){this.hasBtm=t}}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"address"},[e("van-nav-bar",{attrs:{fixed:"",title:"个人信息","left-text":"返回","left-arrow":""},on:{"click-left":this.onClickLeft}}),this._v(" "),e("BusinessCard",{attrs:{form:this.curUser}})],1)},staticRenderFns:[]};var T=s("VU/8")(O,k,!1,function(t){s("WaD4")},"data-v-6d85861a",null);e.default=T.exports},WaD4:function(t,e){}});