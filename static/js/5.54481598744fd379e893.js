webpackJsonp([5],{"5Hoj":function(t,e){},JY3P:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("XmAh");var i,a=n("il3B"),s=(n("eqfM"),n("/QYm")),o=n("bOdI"),r=n.n(o),u=(n("FO5P"),n("woHG")),l=(n("3Lne"),n("SSsa")),c=(n("mMXg"),n("qYlo")),h=(n("dKK0"),n("balU")),m=(n("i0mo"),n("Hkar")),f=(n("MY4N"),n("0zAV")),d=n("irbH"),p=n("GKmE"),g=n("CgFE"),v={components:(i={},r()(i,f.a.name,f.a),r()(i,m.a.name,m.a),r()(i,h.a.name,h.a),r()(i,c.a.name,c.a),r()(i,l.a.name,l.a),r()(i,u.a.name,u.a),i),mixins:[d.a],data:function(){return{showTime:!1,showDate:!1,userName:"",userId:"",theme:"",date:"",time:"",password:"",duration:"",currentDate:new Date,currentTime:"09:00"}},methods:{onClickLeft:function(){this.$router.isBack=!0,this.$router.go(-1)},timeConfirm:function(){this.time=this.currentTime,this.showTime=!1},dateConfirm:function(){this.date=this.formatDate(this.currentDate,"date"),this.showDate=!1},validateForm:function(){var t=!0;return this.theme&&this.date&&this.time&&this.duration||(t=!1),t},recordOnlineCreate:function(t){var e={theme:this.theme,meetingId:t,meetingPass:this.password,creatorId:this.userId,creatorName:this.userName,date:this.date,startTime:this.time,meetingType:2};Object(g.b)(e).then(function(t){t.success||Object(s.a)(t.message||"预约会议失败")})},handleBooking:function(){if(this.validateForm()){var t=this,e={topic:this.theme,meetingType:2,beginDateTime:this.date.replace(/-/g,"")+this.time.replace(/:/g,"")};"Android"===device.platform&&(e.beginDateTime=this.date+" "+this.time+":00"),cicdi.plugins.meeting.createMeeting(function(e){t.recordOnlineCreate(e)},function(e){a.a.confirm({message:"预定会议失败,是否重新预定"}).then(function(){t.handleBooking()}).catch(function(){t.$router.isBack=!0,t.$router.go(-1)})},e)}else Object(s.a)("请完善表单后提交")},selectDate:function(){this.showDate=!0},selectTime:function(){this.showTime=!0}},mounted:function(){var t=JSON.parse(Object(p.d)("userInfo"));this.userName=t.name,this.userId=t.id}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"booking"},[n("van-nav-bar",{attrs:{"left-arrow":"",fixed:"","left-text":"会议"},on:{"click-left":t.onClickLeft}}),t._v(" "),n("van-cell-group",[n("van-field",{staticClass:"booking-item",attrs:{label:"会议主题",clearable:"",placeholder:"请输入会议主题"},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}}),t._v(" "),n("van-field",{staticClass:"booking-item",attrs:{label:"预约日期",readonly:"",placeholder:"请选择预约日期"},on:{click:t.selectDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("van-field",{staticClass:"booking-item",attrs:{label:"开始时间",readonly:"",placeholder:"请选择开始时间"},on:{click:t.selectTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),n("van-field",{staticClass:"booking-item",attrs:{type:"number",label:"预计时长",placeholder:"请输入预计时长(小时)"},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}}),t._v(" "),n("van-field",{staticClass:"booking-item",attrs:{type:"number",label:"会议密码",placeholder:"若会议加密,请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("div",{staticClass:"booking-btn"},[n("van-button",{staticClass:"common-btn",attrs:{round:""},on:{click:t.handleBooking}},[t._v("预约会议")])],1),t._v(" "),n("van-popup",{style:{height:"8.5rem"},attrs:{round:"",position:"bottom"},on:{"click-overlay":t.dateConfirm},model:{value:t.showDate,callback:function(e){t.showDate=e},expression:"showDate"}},[n("van-datetime-picker",{attrs:{"confirm-button-text":" ","cancel-button-text":" ",type:"date"},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),n("van-popup",{style:{height:"8.5rem"},attrs:{round:"",position:"bottom"},on:{"click-overlay":t.timeConfirm},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}},[n("van-datetime-picker",{attrs:{"confirm-button-text":" ","cancel-button-text":" ",type:"time"},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1)],1)},staticRenderFns:[]};var x=n("VU/8")(v,b,!1,function(t){n("Z2r/")},"data-v-1ffafe70",null);e.default=x.exports},"Z2r/":function(t,e){},balU:function(t,e,n){"use strict";var i=n("RfZZ"),a=n("o69Z"),s=n("YNA3"),o=n("joY4"),r=n("mRXp");function u(t,e){return 32-new Date(t,e-1,32).getDate()}var l={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44},swipeDuration:{type:Number,default:1e3}},c=n("RP/J"),h=n("54/E");function m(t){return Array.isArray(t)?t.map(function(t){return m(t)}):"object"==typeof t?Object(h.a)({},t):t}var f=n("V+2B"),d=n("pIDD"),p=n("AA6R"),g=n.n(p),v=n("vwLT"),b=Object(a.b)("picker-column"),x=b[0],y=b[1];function I(t){return Object(a.e)(t)&&t.disabled}var O=x({mixins:[v.a],props:{valueKey:String,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:Number,visibleItemCount:Number,initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:m(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var e=function(t){var e=window.getComputedStyle(t),n=e.transform||e.webkitTransform,i=n.slice(7,n.length-1).split(", ")[5];return Number(i)}(this.$refs.wrapper);this.offset=Math.min(0,e-this.baseOffset),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){this.moving=!0,this.touchMove(t),"vertical"===this.direction&&Object(c.c)(t,!0),this.offset=Object(o.a)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>300&&(this.touchStartTime=e,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this.offset-this.momentumOffset,e=Date.now()-this.touchStartTime;if(e<300&&Math.abs(t)>15)this.momentum(t,e);else{var n=this.getIndexByOffset(this.offset);this.moving=!1,this.duration=200,this.setIndex(n,!0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||(this.duration=200,this.setIndex(t,!0))},adjustIndex:function(t){for(var e=t=Object(o.a)(t,0,this.count);e<this.count;e++)if(!I(this.options[e]))return e;for(var n=t-1;n>=0;n--)if(!I(this.options[n]))return n},getOptionText:function(t){return Object(a.e)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var n=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var i=function(){t!==n.currentIndex&&(n.currentIndex=t,e&&n.$emit("change",t))};this.moving?this.transitionEndTrigger=i:i()},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(o.a)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var n=Math.abs(t/e);t=this.offset+n/.002*(t<0?-1:1);var i=this.getIndexByOffset(t);this.duration=this.swipeDuration,this.setIndex(i,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var t=this,e=this.$createElement,n={height:this.itemHeight+"px"};return this.options.map(function(i,a){var s=t.getOptionText(i),o=I(i),r={style:n,attrs:{role:"button",tabindex:o?-1:0},class:["van-ellipsis",y("item",{disabled:o,selected:a===t.currentIndex})],on:{click:function(){t.onClickItem(a)}}};return t.allowHtml&&(r.domProps={innerHTML:s}),e("li",g()([{},r]),[t.allowHtml?"":s])})}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:this.itemHeight+"px"};return t("div",{class:[y(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{ref:"wrapper",style:e,class:y("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}}),C=Object(a.b)("picker"),V=C[0],k=C[1],T=C[2],w=V({props:Object(i.a)({},l,{defaultIndex:{type:Number,default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:"setColumns"},methods:{setColumns:function(){var t=this;(this.simple?[{values:this.columns}]:this.columns).forEach(function(e,n){t.setColumnValues(n,m(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,n){e.setColumnIndex(n,t)})},onConfirm:function(){this.children.map(function(t){return t.stopMomentum()}),this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,n=this.itemHeight,i=n*this.visibleItemCount,a=this.simple?[this.columns]:this.columns,s={height:n+"px"},o={height:i+"px"},r={backgroundSize:"100% "+(i-n)/2+"px"},u=this.showToolbar&&t("div",{class:[f.f,k("toolbar")]},[this.slots()||[t("button",{class:k("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||T("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",k("title")]},[this.title]),t("button",{class:k("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||T("confirm")])]]);return t("div",{class:k()},["top"===this.toolbarPosition?u:t(),this.loading?t(d.a,{class:k("loading")}):t(),this.slots("columns-top"),t("div",{class:k("columns"),style:o,on:{touchmove:c.c}},[a.map(function(n,i){return t(O,{attrs:{valueKey:e.valueKey,allowHtml:e.allowHtml,className:n.className,itemHeight:e.itemHeight,defaultIndex:n.defaultIndex||e.defaultIndex,swipeDuration:e.swipeDuration,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?n:n.values},on:{change:function(){e.onChange(i)}}})}),t("div",{class:k("mask"),style:r}),t("div",{class:[f.g,k("frame")],style:s})]),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?u:t()])}}),D=Object(i.a)({},l,{value:null,filter:Function,showToolbar:{type:Boolean,default:!0},formatter:{type:Function,default:function(t,e){return e}}}),j={data:function(){return{innerValue:this.formatValue(this.value)}},computed:{originColumns:function(){var t=this;return this.ranges.map(function(e){var n=e.type,i=e.range,a=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(i[1]-i[0]+1,function(t){return Object(s.b)(i[0]+t)});return t.filter&&(a=t.filter(n,a)),{type:n,values:a}})},columns:function(){var t=this;return this.originColumns.map(function(e){return{values:e.values.map(function(n){return t.formatter(e.type,n)})}})}},watch:{columns:"updateColumnValue",innerValue:function(t){this.$emit("input",t)}},mounted:function(){var t=this;this.updateColumnValue(),this.$nextTick(function(){t.updateInnerValue()})},methods:{onConfirm:function(){this.$emit("confirm",this.innerValue)},onCancel:function(){this.$emit("cancel")}},render:function(){var t=this,e=arguments[0],n={};return Object.keys(l).forEach(function(e){n[e]=t[e]}),e(w,{ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:this.onCancel},props:Object(i.a)({},n)})}},H=(0,Object(a.b)("time-picker")[0])({mixins:[j],props:Object(i.a)({},D,{minHour:{type:Number,default:0},maxHour:{type:Number,default:23},minMinute:{type:Number,default:0},maxMinute:{type:Number,default:59}}),computed:{ranges:function(){return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}]}},watch:{filter:"updateInnerValue",minHour:"updateInnerValue",maxHour:"updateInnerValue",minMinute:"updateInnerValue",maxMinute:"updateInnerValue",value:function(t){(t=this.formatValue(t))!==this.innerValue&&(this.innerValue=t,this.updateColumnValue(t))}},methods:{formatValue:function(t){t||(t=Object(s.b)(this.minHour)+":"+Object(s.b)(this.minMinute));var e=t.split(":"),n=e[0],i=e[1];return(n=Object(s.b)(Object(o.a)(n,this.minHour,this.maxHour)))+":"+(i=Object(s.b)(Object(o.a)(i,this.minMinute,this.maxMinute)))},updateInnerValue:function(){var t=this.$refs.picker.getIndexes(),e=this.originColumns[0].values[t[0]]+":"+this.originColumns[1].values[t[1]];this.innerValue=this.formatValue(e)},onChange:function(t){var e=this;this.updateInnerValue(),this.$nextTick(function(){e.$nextTick(function(){e.$emit("change",t)})})},updateColumnValue:function(){var t=this,e=this.formatter,n=this.innerValue.split(":"),i=[e("hour",n[0]),e("minute",n[1])];this.$nextTick(function(){t.$refs.picker.setValues(i)})}}});function M(t){return"[object Date]"===Object.prototype.toString.call(t)&&!Object(r.a)(t.getTime())}var $=(new Date).getFullYear(),N=(0,Object(a.b)("date-picker")[0])({mixins:[j],props:Object(i.a)({},D,{type:{type:String,default:"datetime"},minDate:{type:Date,default:function(){return new Date($-10,0,1)},validator:M},maxDate:{type:Date,default:function(){return new Date($+10,11,31)},validator:M}}),watch:{filter:"updateInnerValue",minDate:"updateInnerValue",maxDate:"updateInnerValue",value:function(t){(t=this.formatValue(t)).valueOf()!==this.innerValue.valueOf()&&(this.innerValue=t)}},computed:{ranges:function(){var t=this.getBoundary("max",this.innerValue),e=t.maxYear,n=t.maxDate,i=t.maxMonth,a=t.maxHour,s=t.maxMinute,o=this.getBoundary("min",this.innerValue),r=o.minYear,u=o.minDate,l=[{type:"year",range:[r,e]},{type:"month",range:[o.minMonth,i]},{type:"day",range:[u,n]},{type:"hour",range:[o.minHour,a]},{type:"minute",range:[o.minMinute,s]}];return"date"===this.type&&l.splice(3,2),"year-month"===this.type&&l.splice(2,3),l}},methods:{formatValue:function(t){return M(t)||(t=this.minDate),t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var n,i=this[t+"Date"],a=i.getFullYear(),s=1,o=1,r=0,l=0;return"max"===t&&(s=12,o=u(e.getFullYear(),e.getMonth()+1),r=23,l=59),e.getFullYear()===a&&(s=i.getMonth()+1,e.getMonth()+1===s&&(o=i.getDate(),e.getDate()===o&&(r=i.getHours(),e.getHours()===r&&(l=i.getMinutes())))),(n={})[t+"Year"]=a,n[t+"Month"]=s,n[t+"Date"]=o,n[t+"Hour"]=r,n[t+"Minute"]=l,n},updateInnerValue:function(){var t,e=this,n=this.$refs.picker.getIndexes(),i=function(t){return function(t){if(t){for(;Object(r.a)(parseInt(t,10));){if(!(t.length>1))return;t=t.slice(1)}return parseInt(t,10)}}(e.originColumns[t].values[n[t]])},a=i(0),s=i(1),o=u(a,s);t=(t="year-month"===this.type?1:i(2))>o?o:t;var l=0,c=0;"datetime"===this.type&&(l=i(3),c=i(4));var h=new Date(a,s-1,t,l,c);this.innerValue=this.formatValue(h)},onChange:function(t){var e=this;this.updateInnerValue(),this.$nextTick(function(){e.$nextTick(function(){e.$emit("change",t)})})},updateColumnValue:function(){var t=this,e=this.innerValue,n=this.formatter,i=[n("year",""+e.getFullYear()),n("month",Object(s.b)(e.getMonth()+1)),n("day",Object(s.b)(e.getDate()))];"datetime"===this.type&&i.push(n("hour",Object(s.b)(e.getHours())),n("minute",Object(s.b)(e.getMinutes()))),"year-month"===this.type&&(i=i.slice(0,2)),this.$nextTick(function(){t.$refs.picker.setValues(i)})}}}),S=Object(a.b)("datetime-picker"),B=S[0],E=S[1];e.a=B({props:Object(i.a)({},H.props,{},N.props),render:function(){return(0,arguments[0])("time"===this.type?H:N,{class:E(),props:Object(i.a)({},this.$props),on:Object(i.a)({},this.$listeners)})}})},dKK0:function(t,e,n){"use strict";var i=n("nsZj"),a=(n.n(i),n("5Hoj"));n.n(a)}});